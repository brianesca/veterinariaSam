<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Veterinaria SAM</title>
        <link rel="stylesheet" href="estilos/estiloSesion.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js" integrity="sha512-rstIgDs0xPgmG6RX1Aba4KV5cWJbAMcvRCVmglpam9SoHZiUCyQVDdH2LPlxoHtrv17XWblE/V/PP+Tr04hbtA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="./js/messages_es.js"></script>
    </head>

    <body>

        <body>
            <div class="container">
                <nav class="sidebar">
                    <header class="scroll-header">
                        <div class="header-title">
                            <button id="toggleSidebar">‚ò∞</button>
                            <div class="header-logo">
                                <a href="index.html">
                                    <img src="Imageneshtml/LogoSam2.png"
                                        alt="Logo">
                                </a>
                            </div>
                        </div>
                        <div class="menu-icon" onclick="toggleMenu()">
                            <a href="sesion.html" class="header-button">
                                <span id="nombreDeUsuario"></span>
                                <img src="Imageneshtml/usuario.png"
                                    alt="Usuario">
                            </a>
                        </div>

                        <a href="carrito.html" class="header-button">
                            <img src="Imageneshtml/carritoo.png" alt="Carrito">
                        </a>
                    </header>

                    <ul id="nav-options">
                        <li class="active"><a href="catalogoProductos.html">Productos</a></li>
                        <li class="active"><a href="contacto.html">Contacto</a></li>
                        <li class="active"><a href="citas.html">Agendar Cita</a></li>
                        <li class="active"><a href="somos.html">¬øQuienes Somos?</a></li>
                        <li class="active"><a href="Dudas.html">Preguntas
                                frecuentes</a></li>
                    </ul>
                </nav>

                <div class="login-wrap">

                    <div class="login-cerrar" id="perfil">
                        <h3>Informacion del usuario</h3>
                        <p><small>Nombre:</small></p>
                        <span id="userName"></span>
                        <p><small>Correo:</small></p>
                        <span id="userEmail"></span>
                        <button class="btn danger btn-block singOut" style="margin-top: 40px;">Cerrar sesion</button>
                    </div>

                    <div class="login-html" id="formulario">
                        <input id="tab-1" type="radio" name="tab"
                            class="sign-in" checked><label for="tab-1"
                            class="tab">Ingresar</label>
                        <input id="tab-2" type="radio" name="tab"
                            class="sign-up"><label for="tab-2" class="tab">Registrarse</label>

                        <div class="login-form">
                            <div class="sign-in-htm">
                                <form id="frm_login" method="post" enctype="multipart/form-data" autocomplete="off">
                                    <div class="group">
                                        <label for="user" class="label">Correo:</label>
                                        <input name="logEmail" id="logEmail" type="text"
                                            class="input">
                                    </div>
                                    <div class="group">
                                        <label for="pass" class="label">contrase√±a</label>
                                        <input name="logPassword" id="logPassword" type="password"
                                            class="input" data-type="password">
                                    </div>
                                    <div class="group">
                                        <input id="check" type="checkbox"
                                            class="check" checked>
                                        <label for="check"><span class="icon"></span>
                                            Mantener sesion</label>
                                    </div>
                                    <div class="group">
                                        <input type="submit"
                                            class="button btn-loggin"
                                            value="Ingresar">
                                    </div>
                                    <div class="hr"></div>
                                    <div class="foot-lnk">
                                        <a href="#forgot">Olvidaste tu contrase√±a?</a>
                                    </div>
                                </form>
                            </div>

                            <div class="sign-up-htm">
                                <form id="frm_register" method="post" enctype="multipart/form-data" autocomplete="off">
                                    <div class="group">
                                        <label for="regNombre" class="label">Nombre de usuario</label>
                                        <input name="regNombre" id="regNombre" type="text" class="input">
                                    </div>
                                    <div class="group">
                                        <label for="regPassword" class="label">Contrase√±a</label>
                                        <input type="password" class="input"
                                            name="regPassword" id="regPassword" data-type="password">
                                    </div>
                                    <div class="group">
                                        <label for="pass" class="label">Repite la
                                            Contrase√±a</label>
                                        <input name="regRePassword" id="regRePassword" type="password"
                                            class="input" data-type="password">
                                    </div>
                                    <div class="group">
                                        <label for="regEmail" class="label">Ingresa tu
                                            correo</label>
                                        <input type="text" class="input"
                                            name="regEmail" id="regEmail">
                                    </div>
                                    <div class="group">
                                        <input type="submit"
                                            class="button btn-registrar"
                                            value="Ingresar">
                                    </div>
                                    <div class="hr"></div>
                                    <div class="foot-lnk">
                                        <label for="tab-1">Ya tienes una cuenta?</a>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer>
                <div class="footer-container">
                    <div class="social-media">
                        <ul>
                            <li><a href="https://www.facebook.com/profile.php?id=100095350443486"
                                target="_blank"><img src="Imageneshtml/logoFB.png" alt="Facebook"></a></li>
                        <li><a href="https://instagram.com/vet_s.a.m?igshid=MzNlNGNkZWQ4Mg=="
                                target="_blank"><img src="Imageneshtml/logoIG.png" alt="Instagram"></a></li>
                        <li><a href="https://api.whatsapp.com/send?phone=1234567890" target="_blank"><img
                                    src="Imageneshtml/logoWA.png" alt="WhatsApp"></a></li>
                        <p>&copy; 2023 Veterinaria S.A.M Phantoms</p>
                            <p>Calle Glorieta de Fuente de Petr√≥leos 340,
                                Evolucion, 57700 Nezahualc√≥yotl, M√©x.</p>
                        </ul>
                    </div>
                    <div class="footer-links">
                        <ul>
                            <li><a href="politica-privacidad.html">Pol√≠tica de
                                    Privacidad |</a></li>
                            <li><a href="#">Preguntas frecuentes | </a></li>
                            <li><a href="mailto:veterinariasam102@gmail.com">veterinariasam102@gmail.com</a></li>
                        </ul>
                    </div>
                    <div>
                        <br>
                    </div>
                </div>
            </footer>

            <!-- este alch igual no se de que sea, ya estaba cuando llegue jajaja üíÄ-->
            <script>
    document.getElementById('toggleSidebar').addEventListener('click', function () {
        document.querySelector('.sidebar').classList.toggle('open');
    });
    let mostrador = document.getElementById("mostrador");
    let seleccion = document.getElementById("seleccion");
    let imgSeleccionada = document.getElementById("img");
    let modeloSeleccionado = document.getElementById("modelo");
    let descripSeleccionada = document.getElementById("descripcion");
    let precioSeleccionado = document.getElementById("precio");
    let descuentoSeleccionado = document.getElementById("descuento");

    function cargar(item) {
        quitarBordes();
        mostrador.style.width = "60%";
        seleccion.style.width = "40%";
        seleccion.style.opacity = "1";
        item.style.border = "2px solid red";

        imgSeleccionada.src = item.getElementsByTagName("img")[0].src;

        modeloSeleccionado.innerHTML = item.getElementsByTagName("p")[0].innerHTML;

        descripSeleccionada.innerHTML = "Descripci√≥n del Poducto ";

        precioSeleccionado.innerHTML = item.getElementsByTagName("span")[0].innerHTML;


    }
    function cerrar() {
        mostrador.style.width = "100%";
        seleccion.style.width = "0%";
        seleccion.style.opacity = "0";
        quitarBordes();
    }
    function quitarBordes() {
        var items = document.getElementsByClassName("item");
        for (i = 0; i < items.length; i++) {
            items[i].style.border = "none";
        }
    }
</script>

<!-- este we se encarga de que el header se minimice al bajar o navegar en la pagina-->
<script>
    window.addEventListener('scroll', function () {
        var header = document.querySelector('.scroll-header');
        if (window.scrollY > 100) {
            header.classList.add('small');
        } else {
            header.classList.remove('small');
        }
    });

</script>

            <script>
    document.addEventListener('click', function (event) {
        var sidebar = document.querySelector('.sidebar');
        var targetElement = event.target;

        if (!sidebar.contains(targetElement) && targetElement.id !== 'toggleSidebar') {
            sidebar.classList.remove('open');
        }
    });

</script>

<script>

$(document).ready(function() {

var $form = $("#frm_register");
$form.validate({
    rules: {
        regNombre: {
            required: true,
            maxlength: 100
        },
        regEmail: {
            required: true,
            email: true,
            maxlength: 100
        },
        regPassword: {
            required: true,
            minlength: 5,
        },
        regRePassword: {
            minlength: 5,
            equalTo: "#regPassword"
        }
    },
    invalidHandler: function(event, validator) {
        var errors = validator.numberOfInvalids();
        if (errors) {
            var message = errors === 1 ?
                'You missed 1 field. It has been highlighted' :
                'You missed ' + errors + ' fields. They have been highlighted';
        }
    },
    submitHandler: function(form) {
        
        var $form = $(form);
        var urlaction = $(form).attr('action');
        var datos = setDatos('frm_register');
        var targetElement = event.target;

        const API_KEY = 'AIzaSyDZ7IbTIjCtdndYXe1-DV14l57FIU_iBlM';
        const projectId = 'tu-id-de-proyecto';
        const collectionName = 'nombre-de-la-coleccion';
        const url = `https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${API_KEY}`;
        
        const authData = {
            email: document.getElementById('regEmail').value,
            displayName: document.getElementById('regNombre').value,
            password: document.getElementById('regPassword').value,
            returnSecureToken: true,
            role: "Admin" 
        }
        
        // Realiza la petici√≥n POST
        fetch(url, {
            method: 'POST',
            headers: {
            'Content-Type': 'application/json' // Indica que los datos se enviar√°n en formato JSON
            },
            body: JSON.stringify(authData) // Convierte el objeto en formato JSON
        })
            .then(response => {
            if (!response.ok) {
                throw new Error('Error en la petici√≥n'); // Si la respuesta no es exitosa, lanza un error
            }
            return response.json(); // Convierte la respuesta a formato JSON
            })
            .then(data => {
                // Aqu√≠ puedes manejar la respuesta del servidor
                console.log('Respuesta del servidor:', data);
                location.reload();
            })
            .catch(error => {
                // Maneja los errores que puedan ocurrir durante la petici√≥n
                console.error('Error:', error);
            });

        } //submit handler
    });

    function setDatos(nombreForm) {
        var data = $('#' + nombreForm).serializeArray();
        var Datos = new FormData();
        $('input[type="file"]').each(function ($i) {
            Datos.append($(this).prop("name"), $(this)[0].files[0]);
        });
        $.each(data,
                function (key, input) {
                    Datos.append(input.name, input.value);
                });
        return Datos;
    }

}); //document
</script>

<script>

$(document).ready(function() {

    var $form = $("#frm_login");
    $form.validate({
        rules: {
            logEmail: {
                required: true,
                maxlength: 100,
                email: true
            },
            logPassword: {
                required: true,
                minlength: 5,
            }
        },
        invalidHandler: function(event, validator) {
            var errors = validator.numberOfInvalids();
            if (errors) {
                var message = errors === 1 ?
                    'You missed 1 field. It has been highlighted' :
                    'You missed ' + errors + ' fields. They have been highlighted';
            }
        },
        submitHandler: function(form) {
            
            var $form = $(form);
            var urlaction = $(form).attr('action');
            var datos = setDatos('frm_login');
            var targetElement = event.target;

            const API_KEY = 'AIzaSyDZ7IbTIjCtdndYXe1-DV14l57FIU_iBlM';
            const url = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${API_KEY}`;
            
            const authData = {
                email: document.getElementById('logEmail').value,
                password: document.getElementById('logPassword').value,
                returnSecureToken: true 
            }

            // Realiza la petici√≥n POST
            fetch(url, {
                method: 'POST',
                headers: {
                'Content-Type': 'application/json' // Indica que los datos se enviar√°n en formato JSON
                },
                body: JSON.stringify(authData) // Convierte el objeto en formato JSON
            })
            .then(response => {
                if (!response.ok) {
                throw new Error('Error en la petici√≥n'); // Si la respuesta no es exitosa, lanza un error
                }
                return response.json(); // Convierte la respuesta a formato JSON
            })
            .then(data => {
                localStorage.setItem("nombre", data.displayName);
                localStorage.setItem("email", data.email);
                window.location.replace("index.html");
                // Aqu√≠ puedes manejar la respuesta del servidor
                console.log('Respuesta del servidor:', data);
            })
            .catch(error => {
                console.error('Error:', error);
            });

        } //submit handler
    });

    function setDatos(nombreForm) {
        var data = $('#' + nombreForm).serializeArray();
        var Datos = new FormData();
        $('input[type="file"]').each(function ($i) {
            Datos.append($(this).prop("name"), $(this)[0].files[0]);
        });
        $.each(data,
                function (key, input) {
                    Datos.append(input.name, input.value);
                });
        return Datos;
    }

}); //document
</script>

<script>
    (() => {
        function documentReady() {
            const miElemento = document.getElementById('nombreDeUsuario');
            const userName = document.getElementById('userName');
            const userEmail = document.getElementById('userEmail');
    
            // Obtener el nombre y correo del usuario almacenados en la Local Storage
            const nombre = localStorage.getItem("nombre");
            const email = localStorage.getItem("email");
    
            if (nombre !== null) {
                // Mostrar el nombre y correo del usuario en el header
                miElemento.textContent = localStorage.getItem("nombre");
                userName.textContent = nombre;
                userEmail.textContent = email;
            }
    
            const formulario = document.getElementById("formulario");
            const perfil = document.getElementById("perfil");
    
            if (nombre !== null) {
                formulario.style.display = "none";
                perfil.style.display = "block";
            } else {
                formulario.style.display = "block";
                perfil.style.display = "none";
            }
        }
        
        document.addEventListener('DOMContentLoaded', documentReady);
    
        var singOut = document.querySelector('.singOut');
        singOut.addEventListener('click', function (event) {
            var targetElement = event.target;
            localStorage.removeItem("nombre");
            localStorage.removeItem("email");
            location.reload();
        });
    })();
    

</script>
        // verificarCorreo
            <script>
    document.addEventListener('DOMContentLoaded', function () {
        const navOptions = document.getElementById('nav-options');
        const userEmail = localStorage.getItem('email'); // Obt√©n el correo electr√≥nico del usuario de la Local Storage
      
        if (userEmail === 'adminsam@gmail.com') {
          // Si el correo electr√≥nico coincide con el correo espec√≠fico, muestra opciones personalizadas
          navOptions.innerHTML = `
            <li><a href="index.html" style= "font-size: 1.5vw;">Inicio</a></li>
            <li style="margin-top: 10%;"><a href="AgregarProducto.html" style= "font-size: 1.5vw;">Agregar productos</a></li>
            <li style="margin-top: 10%;"><a href="Empleado.html" style= "font-size: 1.5vw;">Personal</a></li>
            <li style="margin-top: 10%;"><a href="horarios.html" style= "font-size: 1.5vw;">Horarios</a></li>
            <li class="active" style="margin-top: 10%;"><a href="catalogoProductos.html" style= "font-size: 1.5vw;">Productos</a></li>
            <li class="active" style="margin-top: 10%;"><a href="contacto.html" style= "font-size: 1.5vw;">Contacto</a></li>
            <li class="active" style="margin-top: 10%;"><a href="citas.html" style= "font-size: 1.5vw;">Agendar Cita</a></li>
            <li class="active" style="margin-top: 10%;"><a href="somos.html" style= "font-size: 1.5vw;">¬øQuienes Somos?</a></li>
            <li class="active" style="margin-top: 10%;"><a href="Dudas.html" style= "font-size: 1.5vw;">Preguntas frecuentes</a></li>
            <!-- Otras opciones de navegaci√≥n para usuarios con el correo espec√≠fico -->
          `;
        } else {
          // Si el correo electr√≥nico no coincide con el correo espec√≠fico, muestra opciones est√°ndar
          navOptions.innerHTML = `
          <li class="active"><a href="catalogoProductos.html">Productos</a></li>
          <li class="active"><a href="contacto.html">Contacto</a></li>
          <li class="active"><a href="citas.html">Agendar Cita</a></li>
          <li class="active"><a href="somos.html">¬øQuienes Somos?</a></li>
          <li class="active"><a href="Dudas.html">Preguntas frecuentes</a></li>
            <!-- Otras opciones de navegaci√≥n est√°ndar -->
          `;
        }
      });
      
</script>

<script src="js/navegacion.js"></script>

        </body>
    </html>